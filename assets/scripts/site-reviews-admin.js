!function(t,i,s){"use strict";var n=function(t,s){var n={}.toString.call(t);this.selects="[object String]"===n?i.querySelectorAll(t):"[object NodeList]"===n?t:[t],this.destroy=function(){this.widgets.forEach(function(t){t.t()})},this.rebuild=function(){this.widgets.forEach(function(t){t.i()})},this.widgets=[];for(var o=0;o<this.selects.length;o++)if("SELECT"===this.selects[o].tagName&&!this.selects[o]["star-rating"]){var h=new e(this.selects[o],s);void 0!==h.direction&&this.widgets.push(h)}},e=function(t,i){this.el=t,this.s=this.o({},this.h,i||{},JSON.parse(t.getAttribute("data-options"))),this.u(),this.stars<1||this.stars>this.s.maxStars||this.i()};e.prototype={h:{classname:"gl-star-rating",clearable:!0,initialText:"Select a Rating",maxStars:10,showText:!0},l:function(){this.v(),this.current=this.selected=this.p(),this.g(),this._(),this.m(),this.S(this.current),this.R("add"),this.el["star-rating"]=!0},L:function(){this.s.showText&&(this.textEl=this.G(this.widgetEl,{class:this.s.classname+"-text"},!0))},_:function(){var t=this.k(),i=this.G(this.el,{class:this.s.classname+"-stars"},!0);for(var s in t){var n=this.C({"data-value":s,"data-text":t[s]});i.innerHTML+=n.outerHTML}this.widgetEl=i,this.L()},T:function(t){(t<0||isNaN(t))&&(t=0),t>this.stars&&(t=this.stars),this.widgetEl.classList.remove("s"+10*this.current),this.widgetEl.classList.add("s"+10*t),this.s.showText&&(this.textEl.textContent=t<1?this.s.initialText:this.widgetEl.childNodes[t-1].dataset.text),this.current=t},C:function(t){var s=i.createElement("span");for(var n in t=t||{})s.setAttribute(n,t[n]);return s},t:function(){this.R("remove");var t=this.el.parentNode;t.parentNode.replaceChild(this.el,t),delete this.el["star-rating"]},j:function(t,i,s){s.forEach(function(s){this.events&&t[i+"EventListener"](s,this.events[s])}.bind(this))},o:function(){var t=[].slice.call(arguments),i=t[0],s=t.slice(1);return Object.keys(s).forEach(function(t){for(var n in s[t])s[t].hasOwnProperty(n)&&(i[n]=s[t][n])}),i},I:function(t){var i={},s=t.pageX||t.changedTouches[0].pageX,n=this.widgetEl.offsetWidth;return i.ltr=Math.max(s-this.offsetLeft,1),i.rtl=n-i.ltr,Math.min(Math.ceil(i[this.direction]/Math.round(n/this.stars)),this.stars)},k:function(){for(var t=this.el,i={},s={},n=0;n<t.length;n++)this.P(t[n])||(i[t[n].value]=t[n].text);return Object.keys(i).sort().forEach(function(t){s[t]=i[t]}),s},p:function(){return parseInt(this.el.options[Math.max(this.el.selectedIndex,0)].value)||0},R:function(t){var i=this.el.closest("form");i&&"FORM"===i.tagName&&this.j(i,t,["reset"]),"add"===t&&this.el.disabled||(this.j(this.el,t,["change","keydown"]),this.j(this.widgetEl,t,["mousedown","mouseleave","mousemove","mouseover","touchend","touchmove","touchstart"]))},v:function(){this.events={change:this.D.bind(this),keydown:this.N.bind(this),mousedown:this.V.bind(this),mouseleave:this.F.bind(this),mousemove:this.M.bind(this),mouseover:this.O.bind(this),reset:this.A.bind(this),touchend:this.V.bind(this),touchmove:this.M.bind(this),touchstart:this.O.bind(this)}},G:function(t,i,s){var n=this.C(i);return t.parentNode.insertBefore(n,!0===s?t.nextSibling:t),n},P:function(t){return null===t.getAttribute("value")||""===t.value},D:function(){this.T(this.p())},N:function(t){if(~["ArrowLeft","ArrowRight"].indexOf(t.key)){var i="ArrowLeft"===t.key?-1:1;"rtl"===this.direction&&(i*=-1),this.S(Math.min(Math.max(this.p()+i,0),this.stars)),this.K()}},V:function(t){t.preventDefault();var i=this.I(t);0!==this.current&&parseFloat(this.selected)===i&&this.s.clearable&&(i=0),this.S(i),this.K()},F:function(t){t.preventDefault(),this.T(this.selected)},M:function(t){t.preventDefault(),this.T(this.I(t))},O:function(t){t.preventDefault();var s=this.widgetEl.getBoundingClientRect();this.offsetLeft=s.left+i.body.scrollLeft},A:function(){var t=this.el.querySelector("[selected]"),i=t?t.value:"";this.el.value=i,this.selected=parseInt(i)||0,this.T(i)},i:function(){this.el.parentNode.classList.contains(this.s.classname)&&this.t(),this.l()},m:function(){var i=this.el.parentNode;this.direction=t.getComputedStyle(i,null).getPropertyValue("direction"),i.classList.add(this.s.classname+"-"+this.direction)},S:function(t){this.el.value=this.selected=t,this.T(t)},u:function(){var t=this.el;this.stars=0;for(var i=0;i<t.length;i++)if(!this.P(t[i])){if(isNaN(parseFloat(t[i].value))||!isFinite(t[i].value))return void(this.stars=0);this.stars++}},K:function(){this.el.dispatchEvent(new Event("change"))},g:function(){this.G(this.el,{class:this.s.classname,"data-star-rating":""}).appendChild(this.el)}},"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof module&&module.exports?module.exports=n:t.StarRating=n}(window,document),function(t){"use strict";GLSR.Ajax=function(t,i,s){this.event=i||null,this.form=s||null,this.notice=null,this.request=t||{}},GLSR.Ajax.prototype={post:function(t){this.event?this.U(t):this.$(t)},W:function(t){var i={action:GLSR.action,_ajax_request:!0};if(this.form){var s=new GLSR.Serializer(this.form);s[GLSR.nameprefix]&&(this.request=s[GLSR.nameprefix])}return this.H(t),i[GLSR.nameprefix]=this.request,i},H:function(t){this.request._nonce||(GLSR.nonce[this.request._action]?this.request._nonce=GLSR.nonce[this.request._action]:t&&(this.request._nonce=t.closest("form").find("#_wpnonce").val()))},$:function(i,s){t.post(GLSR.ajaxurl,this.W(s)).done(function(t){"function"==typeof i&&i(t.data,t.success),s&&s.prop("disabled",!1)}).always(function(t){t.data?t.data.notices&&GLSR.notices.add(t.data.notices):GLSR.notices.add('<div class="notice notice-error inline is-dismissible"><p>Unknown error.</p></div>')})},U:function(i){this.event.preventDefault();var s=t(this.event.currentTarget);s.is(":disabled")||(s.prop("disabled",!0),this.$(i,s))}}}(jQuery),function(t){"use strict";GLSR.ColorPicker=function(){"object"==typeof t.wp&&"function"==typeof t.wp.wpColorPicker&&t(document).find("input[type=text].color-picker-hex").each(function(){t(this).wpColorPicker(t(this).data("colorpicker")||{})})}}(jQuery),function(){"use strict";GLSR.Forms=function(t){this.el=document.querySelector(t),this.el&&(this.depends=this.el.querySelectorAll("[data-depends]"),this.depends.length&&this.l())},GLSR.Forms.prototype={J:function(t){var i=t.getAttribute("data-depends");if(i)try{return JSON.parse(i)}catch(t){return}},l:function(){for(var t=this.el.elements,i=0;i<t.length;i++)~["INPUT","SELECT"].indexOf(t[i].nodeName)&&t[i].addEventListener("change",this.D.bind(this))},q:function(t,i){var s=!1;i=[].concat(i);var n=this.el.querySelectorAll('[name="'+t+'"]');return[].map.call(n,function(t){var n=~this.B(i).indexOf(this.X(t.value));~["checkbox","radio"].indexOf(t.type)?t.checked&&n&&(s=!0):n&&(s=!0)}.bind(this)),s},X:function(t){return!!~["true","on","yes","1"].indexOf(t)||!~["false","off","no","0"].indexOf(t)&&t},B:function(t){return t.map(this.X)},D:function(t){this.depends.forEach(function(i){var s=this.J(i);if(s&&~s.map(function(t){return t.name}).indexOf(t.currentTarget.name)){var n=!0;s.forEach(function(t){this.q(t.name,t.value)||(n=!1)}.bind(this)),this.Y(i,n)}}.bind(this))},Y:function(t,i){var s=t.closest(".glsr-field");s&&s.classList[i?"remove":"add"]("hidden")}}}(),function(t){"use strict";GLSR.Metabox=function(){t(".glsr-metabox-field .glsr-toggle__input").on("change",this.Z.bind(this)),t(".glsr-metabox-field input[type=url]").on("change",this.tt.bind(this))},GLSR.Metabox.prototype={tt:function(i){var s=t(i.currentTarget);this.it(s.parent().find("img"),s.val())},Z:function(i){var s=i.currentTarget.checked;t(".glsr-input-value").each(function(i,n){if(s)t(n).data("value",n.value);else{if(n.value=t(n).data("value"),"url"!==n.type)return;this.it(t(n).parent().find("img"),n.value)}}.bind(this)),t(".glsr-input-value").prop("disabled",!s),GLSR.stars.rebuild()},it:function(t,i){if(t){var s=new Image;s.src=i,s.onerror=function(){t.attr("src",t.data("fallback"))},s.onload=function(){t.attr("src",s.src)}}}}}(jQuery),function(t){"use strict";GLSR.Notices=function(){this.l()},GLSR.Notices.prototype={add:function(i){i&&(t("#glsr-notices").length||(t("#message.notice").remove(),t("form#post").before('<div id="glsr-notices" />')),t("#glsr-notices").html(i),t(document).trigger("wp-updates-notice-added"))},l:function(){t(".glsr-notice[data-dismiss]").on("click.wp-dismiss-notice",this.st.bind(this))},st:function(i){var s={};s[GLSR.nameprefix]={_action:"dismiss-notice",notice:t(i.currentTarget).data("dismiss")},wp.ajax.post(GLSR.action,s)}}}(jQuery),function(t){"use strict";GLSR.Pinned=function(){this.el=t("#pinned-status-select"),this.el&&(this.cancel=t("a.cancel-pinned-status"),this.cancel.on("click",this.nt.bind(this)),this.edit=t("a.edit-pinned-status"),this.edit.on("click",this.et.bind(this)),this.save=t("a.save-pinned-status"),this.save.on("click",this.ot.bind(this))),t("td.column-is_pinned i.pin-review").on("click",this.ht.bind(this))},GLSR.Pinned.prototype={ct:function(){this.el.slideUp("fast"),this.edit.show().focus()},nt:function(i){i.preventDefault(),this.ct(),this.el.find("select").val("0"===t("#hidden-pinned-status").val()?1:0)},et:function(t){t.preventDefault(),this.el.is(":hidden")&&(this.el.slideDown("fast",function(){this.el.find("select").focus()}.bind(this)),this.edit.hide())},ot:function(i){i.preventDefault(),this.ct(),this.target=i.currentTarget;var s={_action:"toggle-pinned",id:t("#post_ID").val(),pinned:t("#pinned-status").val()};new GLSR.Ajax(s).post(this.rt.bind(this))},ht:function(i){i.preventDefault(),this.target=i.currentTarget;var s={_action:"toggle-pinned",id:i.currentTarget.getAttribute("data-id")};t(this.target).addClass("spinner is-active").removeClass("dashicons-sticky"),new GLSR.Ajax(s).post(this.at.bind(this))},rt:function(i){t("#pinned-status").val(0|!i.pinned),t("#hidden-pinned-status").val(0|i.pinned),t("#pinned-status-text").text(i.pinned?this.target.dataset.yes:this.target.dataset.no),GLSR.notices.add(i.notices)},at:function(i){this.target.classList[i.pinned?"add":"remove"]("pinned"),t(this.target).removeClass("spinner is-active").addClass("dashicons-sticky")}}}(jQuery),function(t){"use strict";GLSR.Pointers=function(){t.each(GLSR.pointers,function(t,i){this.l(i)}.bind(this))},GLSR.Pointers.prototype={ut:function(i){t.post(GLSR.ajaxurl,{action:"dismiss-wp-pointer",pointer:i})},l:function(i){t(i.target).pointer({content:i.options.content,position:i.options.position,close:this.ut.bind(null,i.id)}).pointer("open").pointer("sendToTop"),t(document).on("wp-window-resized",function(){t(i.target).pointer("reposition")})}}}(jQuery),function(t,i,s){"use strict";GLSR.Search=function(t,i){this.el=s(t),this.options=i,this.searchTerm=null,this.l()},GLSR.Search.prototype={defaults:{action:null,exclude:[],onInit:null,onResultClick:null,results:{},selected:-1,selectedClass:"glsr-selected-result",selectorEntries:".glsr-strings-table tbody",selectorResults:".glsr-search-results",selectorSearch:".glsr-search-input"},l:function(){this.options=s.extend({},this.defaults,this.options),this.el.length&&(this.options.entriesEl=this.el.parent().find(this.options.selectorEntries),this.options.resultsEl=this.el.find(this.options.selectorResults),this.options.searchEl=this.el.find(this.options.selectorSearch),this.options.searchEl.attr("aria-describedby","live-search-desc"),"function"==typeof this.options.onInit&&this.options.onInit.call(this),this.v())},v:function(){this.options.searchEl.on("input",t.debounce(this.lt.bind(this),500)),this.options.searchEl.on("keyup",this.dt.bind(this)),this.options.searchEl.on("keydown keypress",function(t){GLSR.keys.ENTER===t.which&&t.preventDefault()}),s(document).on("click",this.ft.bind(this)),s(document).on("keydown",this.vt.bind(this))},pt:function(){void 0!==this.searchRequest&&this.searchRequest.abort()},gt:function(){this.pt(),this.options.resultsEl.empty(),this.options.resultsEl.removeClass("is-active"),this.el.removeClass("is-active"),s("body").removeClass("glsr-focus")},_t:function(t){var i=this.options.entriesEl.children("tr").eq(t),n=this;i.find("td").css({backgroundColor:"#faafaa"}),i.fadeOut(350,function(){s(this).remove(),n.options.results={},n.St(),n.wt()})},Rt:function(t){s("body").addClass("glsr-focus"),this.options.resultsEl.append(t),this.options.resultsEl.children("span").on("click",this.Lt.bind(this))},Gt:function(){this.options.entriesEl.on("click","a.delete",this.yt.bind(this)),this.options.entriesEl.sortable({items:"tr",tolerance:"pointer",start:function(t,i){i.placeholder.height(i.helper[0].scrollHeight)},sort:function(t,i){var n=t.pageY-s(this).offsetParent().offset().top-i.helper.outerHeight(!0)/2;i.helper.css({top:n+"px"})}})},bt:function(t){this.options.selected+=t,this.options.results.removeClass(this.options.selectedClass),this.options.selected<0&&(this.options.selected=-1,this.options.searchEl.focus()),this.options.selected>=this.options.results.length&&(this.options.selected=this.options.results.length-1),this.options.selected>=0&&this.options.results.eq(this.options.selected).addClass(this.options.selectedClass).focus()},ft:function(t){s(t.target).find(this.el).length&&s("body").hasClass("glsr-focus")&&this.gt()},vt:function(t){if(!s.isEmptyObject(this.options.results)){if(GLSR.keys.ESC===t.which&&this.gt(),GLSR.keys.ENTER===t.which||GLSR.keys.SPACE===t.which){var i=this.options.resultsEl.find("."+this.options.selectedClass);i&&i.trigger("click")}GLSR.keys.UP===t.which&&(t.preventDefault(),this.bt(-1)),GLSR.keys.DOWN===t.which&&(t.preventDefault(),this.bt(1))}},yt:function(t){t.preventDefault(),this._t(s(t.currentTarget).closest("tr").index())},Lt:function(t){t.preventDefault(),"function"==typeof this.options.onResultClick&&this.options.onResultClick.call(this,t),this.gt()},lt:function(t){if(this.pt(),this.searchTerm===t.currentTarget.value&&this.options.results.length)return this.Rt(this.options.results);if(this.options.resultsEl.empty(),this.options.selected=-1,this.searchTerm=t.currentTarget.value,""===this.searchTerm)return this.kt();this.el.addClass("is-active");var s={};s[GLSR.nameprefix]={_action:this.options.action,_nonce:this.el.find("#_search_nonce").val(),exclude:this.options.exclude,search:this.searchTerm},this.searchRequest=i.ajax.post(GLSR.action,s).done(function(t){this.el.removeClass("is-active"),this.Rt(t.items?t.items:t.empty),this.options.results=this.options.resultsEl.children(),this.options.resultsEl.addClass("is-active"),delete this.searchRequest}.bind(this))},dt:function(t){GLSR.keys.ESC===t.which&&this.kt(),GLSR.keys.ENTER===t.which&&(this.lt(t),t.preventDefault())},xt:function(t){t.preventDefault();var i=s(t.currentTarget).closest(".glsr-assigned-entry");i.find("a").css({color:"#c00"}),i.fadeOut("fast",function(){i.remove()})},St:function(){var t=this;this.options.exclude=[],this.options.entriesEl.children("tr").each(function(i){s(this).find(".glsr-string-td2").children().filter(":input").each(function(){var n=s(this),e=n.attr("name").replace(/\[\d+\]/i,"["+i+"]");n.attr("name",e),n.is("[data-id]")&&t.options.exclude.push({id:n.val()})})})},kt:function(){this.gt(),this.options.results={},this.options.searchEl.val("")},wt:function(){var t=this.options.entriesEl.children().length>0?"remove":"add";this.options.entriesEl.parent()[t+"Class"]("glsr-hidden")}}}(window._,window.wp,jQuery),function(t){"use strict";GLSR.Serializer=function(i){return this.data={},this.form=t(i),this.pushes={},this.init()},GLSR.Serializer.prototype={patterns:{validate:/^[a-z_-][a-z0-9_-]*(?:\[(?:\d*|[a-z0-9_-]+)\])*$/i,key:/[a-z0-9_-]+|(?=\[\])/gi,named:/^[a-z0-9_-]+$/i,push:/^$/,fixed:/^\d+$/},addPair:function(i){this.patterns.validate.test(i.name)&&(this.data=t.extend(!0,this.data,this.makeObject(i.name,this.encode(i))))},build:function(t,i,s){return t[i]=s,t},encode:function(i){switch(t('[name="'+i.name+'"]',this.form).attr("type")){case"checkbox":return"on"===i.value||i.value;default:return i.value}},incrementPush:function(t){return void 0===this.pushes[t]&&(this.pushes[t]=0),this.pushes[t]++},init:function(){var i=this.form.serializeArray();if(t.isArray(i))for(var s=0,n=i.length;s<n;s++)this.addPair(i[s]);return this.data},makeObject:function(t,i){for(var s,n=t.match(this.patterns.key);void 0!==(s=n.pop());)if(this.patterns.push.test(s)){var e=this.incrementPush(t.replace(/\[\]$/,""));i=this.build([],e,i)}else this.patterns.fixed.test(s)?i=this.build([],s,i):this.patterns.named.test(s)&&(i=this.build({},s,i));return i}}}(jQuery),function(t){"use strict";GLSR.Shortcode=function(t){this.current=null,this.editor=null,this.create=function(t){if(this.editor=tinymce.get(t),this.editor){var i={_action:"mce-shortcode",shortcode:this.current};new GLSR.Ajax(i).post(this.Ct.bind(this))}};var i=document.querySelectorAll(t);i.length&&i.forEach(function(t){var i=t.querySelector("button"),s=t.querySelectorAll(".mce-menu-item");i&&s.length&&this.l(t,i,s)}.bind(this))},GLSR.Shortcode.prototype={Et:{},Tt:[],l:function(t,i,s){document.addEventListener("click",this.jt.bind(this,t,i)),i.addEventListener("click",this.zt.bind(this,t,i)),s.forEach(function(s){s.addEventListener("click",this.It.bind(this,t,i))}.bind(this))},Qt:function(){tinymce.execCommand("GLSR_Shortcode")},Pt:function(){t("#scTemp").length?this.Qt():(t("body").append('<textarea id="scTemp" style="display:none!important;"/>'),tinymce.init({elements:"scTemp",external_plugins:GLSR.tinymce,mode:"exact",plugins:["glsr_shortcode","wplink"]}),setTimeout(function(){this.Qt()}.bind(this),200))},ut:function(i,s){t(s).removeClass("active"),t(i).find(".glsr-mce-menu").hide()},t:function(){var i=t("#scTemp");i.length&&(tinymce.get("scTemp").remove(),i.remove()),this.Et={},this.Tt=[]},Ct:function(t){if(t){if(0===t.body.length)return window.send_to_editor("["+t.shortcode+"]"),void this.t();var i=this.Dt(t);t.ok.constructor===Array&&(i.buttons[0].text=t.ok[0],i.buttons[0].onclick="close",delete i.buttons[1]),this.editor.windowManager.open(i)}},Nt:function(t){for(var i in this.Et=t,this.Tt=[],t)t.hasOwnProperty(i)&&(this.Vt(i),this.Ft(i),this.Mt(i));this.Et.hide=this.Tt.join(",")},Vt:function(i){"display"!==i||t.isNumeric(this.Et[i])||(this.Et[i]="")},Ft:function(t){if(GLSR.hideoptions.hasOwnProperty(this.current)){var i=t.substring("hide_".length);-1!==Object.keys(GLSR.hideoptions[this.current]).indexOf(i)&&(this.Et[t]&&this.Tt.push(i),delete this.Et[t])}},Mt:function(t){"id"===t&&(this.Et[t]=(+new Date).toString(36))},jt:function(i,s,n){t(n.target).closest(t(i)).length||this.ut(i,s)},zt:function(t,i,s){s.preventDefault(),s.currentTarget.classList.contains("active")?this.ut(t,i):this.Ot(t,i)},It:function(t,i,s){s.preventDefault(),this.current=s.currentTarget.dataset.shortcode,this.current&&(tinymce.get(window.wpActiveEditor)?this.Qt():this.Pt(),setTimeout(function(){this.ut(t,i)}.bind(this),100))},Ot:function(i,s){t(s).addClass("active"),t(i).find(".glsr-mce-menu").show()},At:function(t){return[{classes:"btn glsr-btn primary",onclick:this.Kt.bind(this),text:t.ok},{onclick:"close",text:t.close}]},Dt:function(t){return{title:t.title,body:t.body,classes:"glsr-mce-popup",minWidth:320,buttons:this.At(t),onsubmit:this.Ut.bind(this,t),onclose:this.t.bind(this)}},Ut:function(t,i){var s="";for(var n in this.Nt(i.data),this.Et)this.Et.hasOwnProperty(n)&&""!==this.Et[n]&&(s+=" "+n+'="'+this.Et[n]+'"');window.send_to_editor("["+t.shortcode+s+"]")},Kt:function(){var t=this.editor.windowManager.getWindows()[0];this.$t(t)&&t.submit()},$t:function(t){var i,s=!0,n=GLSR.shortcodes[this.current];for(var e in n)if(n.hasOwnProperty(e)&&void 0!==(i=t.find("#"+e)[0])&&""===i.state.data.value){s=!1,alert(n[e]);break}return s}}}(jQuery),function(t){"use strict";GLSR.Status=function(t){var i=document.querySelectorAll(t);i.length&&i.forEach(function(t){t.addEventListener("click",this.st)}.bind(this))},GLSR.Status.prototype={st:function(i){var s=i.currentTarget.href.match(/post=([0-9]+)/),n=i.currentTarget.href.match(/action=([a-z]+)/);if(null!==s&&null!==n){var e={_action:"toggle-status",_nonce:GLSR.nonce["toggle-status"],post_id:s[1],status:n[1]};new GLSR.Ajax(e,i).post(function(s){if(s.class){var n=t(i.target);n.closest("tr").removeClass("status-pending status-publish").addClass(s.class),n.closest("td.column-title").find("strong").html(s.link),s.counts&&(n.closest(".wrap").find("ul.subsubsub").html(s.counts),t("#menu-posts-site-review").find(".awaiting-mod").removeClass().addClass("awaiting-mod count-"+s.pending).find(".unapproved-count").html(s.pending))}})}}}}(jQuery),function(t){"use strict";GLSR.Sync=function(){this.button=t("button#sync-reviews"),this.progressbar=t(".glsr-progress"),this.service=null,t("form.glsr-form-sync").on("click","#sync-reviews",this.Wt.bind(this)),t(document).on("wp-window-resized",this.Ht),t(window).on("hashchange",this.Ht),this.Ht()},GLSR.Sync.prototype={Jt:function(i){t(".service-"+this.service+" td.column-last_sync").text(i.last_sync),t(".service-"+this.service+" td.column-total_fetched a").text(i.total),this.qt(!1)},Wt:function(i){i.preventDefault(),this.service=t('[name="'+GLSR.nameprefix+'[service]"]').val(),this.service&&(this.qt(!0),this.Bt())},Ht:function(){var i=t(".glsr-progress").width();i&&t(".glsr-progress span").width(i)},Bt:function(){var t={_action:"sync-reviews",service:this.service,stage:"fetch"};new GLSR.Ajax(t).post(this.Xt.bind(this))},Xt:function(t){var i={_action:"sync-reviews",job_id:t.job_id,service:this.service,stage:"progress"},s=t.finished?this.Yt.bind(this,t):this.Xt.bind(this);this.Zt(t.message),this.ti(t.percent),setTimeout(function(){new GLSR.Ajax(i).post(s)},1500)},Yt:function(t){var i=0;try{i=t.meta.pagination.current_page}catch(t){}var s={_action:"sync-reviews",page:i+1,service:this.service,stage:"reviews"};this.Zt(t.message),t.percent_synced&&t.percent_synced>=100?this.Jt(t):new GLSR.Ajax(s).post(this.Yt.bind(this))},Zt:function(i){t(".glsr-progress-status",this.progressbar).text(i)},ti:function(i){i=(i||0)+"%",t(".glsr-progress-bar",this.progressbar).outerWidth(i)},qt:function(t){if(!0===t&&(this.Zt(this.progressbar.data("active-text")),this.ti(),this.button.prop("disabled",!0),window.requestAnimationFrame(function(){this.progressbar.addClass("active")}.bind(this))),!1===t)return this.service=null,this.button.prop("disabled",!1),void this.progressbar.removeClass("active");window.requestAnimationFrame(this.qt.bind(this))}}}(jQuery),function(t){"use strict";GLSR.Tabs=function(i){this.options=t.extend({},this.defaults,i),this.active=document.querySelector("input[name=_active_tab]"),this.referrer=document.querySelector("input[name=_wp_http_referer]"),this.tabs=document.querySelectorAll(this.options.tabSelector),this.views=document.querySelectorAll(this.options.viewSelector),this.active&&this.referrer&&this.tabs&&this.views&&this.l()},GLSR.Tabs.prototype={defaults:{tabSelector:".glsr-nav-tab",viewSelector:".glsr-nav-view"},l:function(){var i=this;t(window).on("hashchange",i.ii.bind(i)),[].forEach.call(i.tabs,function(t,s){(location.hash?t.getAttribute("href").slice(1)===location.hash.slice(5):0===s)&&i.si(t),t.addEventListener("click",i.st.bind(i)),t.addEventListener("touchend",i.st.bind(i))}.bind(i)),t(i.options.viewSelector).on("click","a",function(){var s=t(this).data("expand");localStorage.setItem("glsr-expand",s),i.ni(t(s))}),t(window).on("load",function(){i.ni(t(localStorage.getItem("glsr-expand")))})},ei:function(t){return t?"add":"remove"},st:function(t){t.preventDefault();var i=t.currentTarget;i.blur(),this.oi(i),this.si(i),location.hash="tab-"+i.getAttribute("href").slice(1)},ii:function(){for(var t=location.hash.split("#tab-")[1],i=0;i<this.views.length;i++)if(t===this.views[i].id){this.si(this.tabs[i]);break}},ni:function(t){if(t.length){var i=t.parent();i.removeClass("collapsed"),this.hi(i),i.removeClass("collapsed"),t.removeClass("closed").find(".handlediv").attr("aria-expanded",!0),window.setTimeout(function(){t[0].scrollIntoView({behavior:"smooth",block:"center"}),localStorage.removeItem("glsr-expand")},10)}},ci:function(t){var i=this.referrer.value.split("#")[0]+"#tab-"+this.views[t].id;this.referrer.value=i},si:function(t){[].forEach.call(this.tabs,function(i,s){var n=this.ei(i===t);"add"===n&&(this.active.value=this.views[s].id,this.ci(s),this.ri(s)),i.classList[n]("nav-tab-active")}.bind(this))},ri:function(t){[].forEach.call(this.views,function(i,s){var n=this.ei(s!==t);i.classList[n]("ui-tabs-hide")}.bind(this))},hi:function(t){var i=t.hasClass("collapsed")?"remove":"add";t[i+"Class"]("collapsed").find(".glsr-card.postbox")[i+"Class"]("closed").find(".handlediv").attr("aria-expanded","add"!==i)},oi:function(i){if(i.classList.contains("nav-tab-active")){var s=t(i.getAttribute("href"));this.hi(s)}}}}(jQuery),function(t){"use strict";GLSR.TextareaResize=function(){var i=document.querySelector("#contentdiv > textarea");i&&(this.ai(i),t(document).on("wp-window-resized.editor-expand",function(){this.ai(i)}.bind(this)))},GLSR.TextareaResize.prototype={ai:function(t){var i=t.scrollHeight>320?t.scrollHeight:320;t.style.height="auto",t.style.height=i+"px"}}}(jQuery),function(t){"use strict";GLSR.Tools=function(){t("form").on("click","#clear-console",this.ui,this.st.bind(this)),t("form").on("click","#fetch-console",this.ui,this.st.bind(this)),t("form").on("click","[data-ajax-click]",this.st.bind(this));var i=t("input[data-alt]");i.length&&(t(document).on("keydown",this.li.bind(this,i)),t(document).on("keyup",this.di.bind(this,i)))},GLSR.Tools.prototype={ui:function(i,s){s&&t("#log-file").val(i.console)},st:function(i){new GLSR.Ajax({},i,i.currentTarget.closest("form")).post(function(s,n){"function"==typeof i.data&&i.data(s,n),t("html, body").animate({scrollTop:0},500),t("#glsr-notices").on("click","a",function(){localStorage.setItem("glsr-expand",t(this).data("expand"))}),t('.glsr-notice[data-notice="'+t(i.currentTarget).data("remove-notice")+'"]').remove()})},li:function(t,i){GLSR.keys.ALT!==i.keyCode||i.repeat||(t.closest("form").find("[data-alt-text]").addClass("alt"),t.val(1))},di:function(t,i){GLSR.keys.ALT===i.keyCode&&(t.closest("form").find("[data-alt-text]").removeClass("alt"),t.val(0))}}}(jQuery),GLSR.keys={ALT:18,DOWN:40,ENTER:13,ESC:27,SPACE:32,UP:38},jQuery(function(t){GLSR.notices=new GLSR.Notices,GLSR.shortcode=new GLSR.Shortcode(".glsr-mce"),GLSR.stars=new StarRating(document.querySelectorAll("select.glsr-star-rating"),{showText:!1}),GLSR.ColorPicker(),new GLSR.Forms("form.glsr-form"),new GLSR.Metabox,new GLSR.Pinned,new GLSR.Pointers,new GLSR.Search("#glsr-search-posts",{action:"search-posts",onInit:function(){this.el.find(".glsr-remove-button").on("click",this.xt.bind(this))},onResultClick:function(i){var s=t(i.currentTarget),n=wp.template("glsr-assigned-posts"),e={id:s.data("id"),name:"post_ids[]",url:s.data("url"),title:s.text()};if(n){var o=t(n(e));o.find(".glsr-remove-button").on("click",this.xt.bind(this)),this.el.find(".glsr-selected-entries").append(o),this.kt()}this.options.searchEl.focus()}}),new GLSR.Search("#glsr-search-users",{action:"search-users",onInit:function(){this.el.find(".glsr-remove-button").on("click",this.xt.bind(this))},onResultClick:function(i){var s=t(i.currentTarget),n=wp.template("glsr-assigned-users"),e={id:s.data("id"),name:"user_ids[]",url:s.data("url"),title:s.text()};if(n){var o=t(n(e));o.find(".glsr-remove-button").on("click",this.xt.bind(this)),this.el.find(".glsr-selected-entries").append(o),this.kt()}this.options.searchEl.focus()}}),new GLSR.Search("#glsr-search-translations",{action:"search-translations",onInit:function(){this.Gt()},onResultClick:function(i){var s=t(i.currentTarget),n=s.data("entry"),e=wp.template("glsr-string-"+(n.p1?"plural":"single"));n.index=this.options.entriesEl.children().length,n.prefix=this.options.resultsEl.data("prefix"),e&&(this.options.entriesEl.append(e(n)),this.options.exclude.push({id:n.id}),this.options.results=this.options.results.filter(function(t,i){return i!==s.get(0)})),this.wt()}}),new GLSR.Status("a.glsr-toggle-status"),new GLSR.Tabs,new GLSR.TextareaResize,new GLSR.Tools,new GLSR.Sync;var i=function(){this.dataset.glsrTrack=this.value};t("select[data-glsr-track]").each(i),t("select[data-glsr-track]").on("change",i),t(".glsr-card.postbox").addClass("closed").find(".handlediv").attr("aria-expanded",!1).closest(".glsr-nav-view").addClass("collapsed"),t(".glsr-support-step").not(":checked").length<1&&t(".glsr-card-result").removeClass("hidden"),t(".glsr-support-step").on("change",function(){var i=t(".glsr-support-step").not(":checked").length>0?"add":"remove";t(".glsr-card-result")[i+"Class"]("hidden")}),t(".glsr-card.postbox .glsr-card-header").on("click",function(){var i=t(this).parent(),s=i.closest(".glsr-nav-view"),n=i.hasClass("closed")?"remove":"add";i[n+"Class"]("closed").find(".handlediv").attr("aria-expanded","add"!==n),n=s.find(".glsr-card.postbox").not(".closed").length>0?"remove":"add",s[n+"Class"]("collapsed")})});
