jQuery((function(n){var o=wp.i18n.__,a=document.querySelector("#rollback-plugin"),e=n(a).find("button"),i=e.find("span"),r=function(n){GLSR.notices.error(GLSR.text.rollback_error),e.removeClass("is-busy").prop("disabled",0),console.error(n)},s=function(n){var a;_.isObject(n)&&!_.isFunction(n.always)?a=n.errorMessage:_.isString(n)&&"-1"===n?a=o("An error has occurred. Please reload the page and try again."):_.isString(n)?a=n:void 0!==n.readyState&&0===n.readyState?a=o("Connection lost or the server is busy. Please try again later."):_.isString(n.responseText)&&""!==n.responseText?a=n.responseText:_.isString(n.statusText)&&(a=n.statusText),a=a.replace(/<[\/a-z][^<>]*>/gi,""),GLSR.notices.error(GLSR.text.rollback_error+": "+a)},t=function(n){wp.ajax.send({data:n.data,error:s,success:function(){return window.location=n.url}}).always((function(n){e.removeClass("is-busy").prop("disabled",0),void 0!==n.debug&&_.map(n.debug,(function(n){return console.info(n)}))}))};n(a).on("submit",(function(n){n.preventDefault();var o={_ajax_request:!0,action:GLSR.action},s={_action:a.action.value,_nonce:a._wpnonce.value,version:a.version.value};o[GLSR.nameprefix]=s,i.attr("data-loading",i.data("loading").replace("%s","v"+s.version)),e.addClass("is-busy").prop("disabled",1),wp.ajax.send({data:o,error:r,success:t})}))}));
